<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocabulary Matching Game</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .container { display: flex; justify-content: space-between; }
        .column { width: 45%; }
        .word, .definition { padding: 10px; margin: 5px; cursor: pointer; border: 1px solid #ccc; }
        .word:hover, .definition:hover { background: #f0f0f0; }
        .matched { background: #90EE90; }
        .score { margin: 20px 0; font-weight: bold; }
        #reset { display: none; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Vocabulary Matching Game</h1>
    <input type="file" id="vocabFile" accept=".txt">
    <div class="score">Score: <span id="score">0</span></div>
    <div class="container">
        <div class="column" id="words"></div>
        <div class="column" id="definitions"></div>
    </div>
    <button id="reset">Reset</button>

    <script>
        let vocabulary = [];
        let score = 0;
        let selectedWord = null;
        let matchedPairs = [];

        document.getElementById('vocabFile').addEventListener('change', handleFile);
        document.getElementById('reset').addEventListener('click', resetGame);

        function handleFile(event) {
            const file = event.target.files[0];
            const reader = new FileReader();
            reader.onload = function(e) {
                const lines = e.target.result.split('\n').filter(line => line.trim());
                vocabulary = lines.map(line => {
                    const [word, definition] = line.split(' : ').map(str => str.trim());
                    return { word, definition };
                });
                startGame();
            };
            reader.readAsText(file);
        }

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startGame() {
            matchedPairs = [];
            document.getElementById('reset').style.display = 'none';
            const wordsDiv = document.getElementById('words');
            const definitionsDiv = document.getElementById('definitions');
            wordsDiv.innerHTML = '';
            definitionsDiv.innerHTML = '';

            const shuffledWords = shuffle([...vocabulary]);
            const shuffledDefinitions = shuffle([...vocabulary]);

            shuffledWords.forEach(item => {
                const word = document.createElement('div');
                word.className = 'word';
                word.textContent = item.word;
                word.dataset.definition = item.definition;
                word.addEventListener('click', () => selectWord(word));
                wordsDiv.appendChild(word);
            });

            shuffledDefinitions.forEach(item => {
                const def = document.createElement('div');
                def.className = 'definition';
                def.textContent = item.definition;
                def.dataset.word = item.word;
                def.addEventListener('click', () => selectDefinition(def));
                definitionsDiv.appendChild(def);
            });
        }

        function selectWord(word) {
            if (selectedWord) selectedWord.style.background = '';
            selectedWord = word;
            word.style.background = '#e0e0e0';
        }

        function selectDefinition(def) {
            if (!selectedWord) return;

            const wordText = selectedWord.textContent;
            const defText = def.textContent;

            if (vocabulary.find(item => item.word === wordText && item.definition === defText)) {
                selectedWord.classList.add('matched');
                def.classList.add('matched');
                selectedWord.style.pointerEvents = 'none';
                def.style.pointerEvents = 'none';
                score++;
                matchedPairs.push(wordText);
            } else {
                score--;
            }

            document.getElementById('score').textContent = score;
            selectedWord.style.background = '';
            selectedWord = null;

            if (matchedPairs.length === vocabulary.length) {
                document.getElementById('reset').style.display = 'block';
            }
        }

        function resetGame() {
            startGame();
        }
    </script>
</body>
</html>